<?xml version="1.0" encoding="UTF-8"?>
<mapper namespace="com.demo.UserMapper">
  <sql id="Base_Cols">id, name, age, city</sql>

  <select id="selectById">
    SELECT <include refid="Base_Cols"/> FROM t_user
    <where>
      <if test="id != null"> AND id = #{id} </if>
      <if test="name != null &amp;&amp; name != ''"> AND name = #{name} </if>
    </where>
  </select>

  <select id="selectIn">
    SELECT * FROM t_user
    <where>
      <if test="ids != null &amp;&amp; !isEmpty(ids)">
        id IN
        <foreach collection="ids" item="x" open="(" close=")" separator=",">
          #{x}
        </foreach>
      </if>
    </where>
  </select>

  <select id="selectOrder">
    SELECT * FROM t_user ORDER BY ${orderBy}
  </select>

  <select id="nestedPojo">
    SELECT * FROM t_addr
    <where>
      <if test="user != null &amp;&amp; user.addr != null">
        city = #{user.addr.city}
      </if>
    </where>
  </select>
  
</mapper>
